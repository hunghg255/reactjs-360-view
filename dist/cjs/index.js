"use strict";var e=require("react/jsx-runtime"),t=require("react"),n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},n(e,t)};function r(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var a,s={exports:{}},c={exports:{}},u={};var l,f,p,h,d,m,v,g,y,b,w,x,S,E,P={};
/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function I(){return f||(f=1,"production"===process.env.NODE_ENV?c.exports=function(){if(a)return u;a=1;var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,d=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,b=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var a=e.$$typeof;switch(a){case t:switch(e=e.type){case l:case f:case r:case i:case o:case h:return e;default:switch(e=e&&e.$$typeof){case c:case p:case v:case m:case s:return e;default:return a}}case n:return a}}}function S(e){return x(e)===f}return u.AsyncMode=l,u.ConcurrentMode=f,u.ContextConsumer=c,u.ContextProvider=s,u.Element=t,u.ForwardRef=p,u.Fragment=r,u.Lazy=v,u.Memo=m,u.Portal=n,u.Profiler=i,u.StrictMode=o,u.Suspense=h,u.isAsyncMode=function(e){return S(e)||x(e)===l},u.isConcurrentMode=S,u.isContextConsumer=function(e){return x(e)===c},u.isContextProvider=function(e){return x(e)===s},u.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},u.isForwardRef=function(e){return x(e)===p},u.isFragment=function(e){return x(e)===r},u.isLazy=function(e){return x(e)===v},u.isMemo=function(e){return x(e)===m},u.isPortal=function(e){return x(e)===n},u.isProfiler=function(e){return x(e)===i},u.isStrictMode=function(e){return x(e)===o},u.isSuspense=function(e){return x(e)===h},u.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===f||e===i||e===o||e===h||e===d||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===s||e.$$typeof===c||e.$$typeof===p||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===g)},u.typeOf=x,u}():c.exports=(l||(l=1,"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,h=e?Symbol.for("react.memo"):60115,d=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,y=e?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var p=e.$$typeof;switch(p){case t:var m=e.type;switch(m){case c:case u:case r:case i:case o:case f:return m;default:var v=m&&m.$$typeof;switch(v){case s:case l:case d:case h:case a:return v;default:return p}}case n:return p}}}var w=c,x=u,S=s,E=a,I=t,O=l,R=r,j=d,C=h,L=n,T=i,M=o,D=f,k=!1;function N(e){return b(e)===u}P.AsyncMode=w,P.ConcurrentMode=x,P.ContextConsumer=S,P.ContextProvider=E,P.Element=I,P.ForwardRef=O,P.Fragment=R,P.Lazy=j,P.Memo=C,P.Portal=L,P.Profiler=T,P.StrictMode=M,P.Suspense=D,P.isAsyncMode=function(e){return k||(k=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),N(e)||b(e)===c},P.isConcurrentMode=N,P.isContextConsumer=function(e){return b(e)===s},P.isContextProvider=function(e){return b(e)===a},P.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},P.isForwardRef=function(e){return b(e)===l},P.isFragment=function(e){return b(e)===r},P.isLazy=function(e){return b(e)===d},P.isMemo=function(e){return b(e)===h},P.isPortal=function(e){return b(e)===n},P.isProfiler=function(e){return b(e)===i},P.isStrictMode=function(e){return b(e)===o},P.isSuspense=function(e){return b(e)===f},P.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===u||e===i||e===o||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===h||e.$$typeof===a||e.$$typeof===s||e.$$typeof===l||e.$$typeof===v||e.$$typeof===g||e.$$typeof===y||e.$$typeof===m)},P.typeOf=b}()),P)),c.exports}
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function O(){if(h)return p;h=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;return p=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(r,o){for(var i,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(r),c=1;c<arguments.length;c++){for(var u in i=Object(arguments[c]))t.call(i,u)&&(s[u]=i[u]);if(e){a=e(i);for(var l=0;l<a.length;l++)n.call(i,a[l])&&(s[a[l]]=i[a[l]])}}return s},p}function R(){if(m)return d;m=1;return d="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function j(){return g?v:(g=1,v=Function.call.bind(Object.prototype.hasOwnProperty))}if("production"!==process.env.NODE_ENV){var C=I();s.exports=function(){if(x)return w;x=1;var e=I(),t=O(),n=R(),r=j(),o=function(){if(b)return y;b=1;var e=function(){};if("production"!==process.env.NODE_ENV){var t=R(),n={},r=j();e=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function o(o,i,a,s,c){if("production"!==process.env.NODE_ENV)for(var u in o)if(r(o,u)){var l;try{if("function"!=typeof o[u]){var f=Error((s||"React class")+": "+a+" type `"+u+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof o[u]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw f.name="Invariant Violation",f}l=o[u](i,u,s,a,null,t)}catch(e){l=e}if(!l||l instanceof Error||e((s||"React class")+": type specification of "+a+" `"+u+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof l+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),l instanceof Error&&!(l.message in n)){n[l.message]=!0;var p=c?c():"";e("Failed "+a+" type: "+l.message+(null!=p?p:""))}}}return o.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(n={})},y=o}(),i=function(){};function a(){return null}return"production"!==process.env.NODE_ENV&&(i=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}),w=function(s,c){var u="function"==typeof Symbol&&Symbol.iterator,l="@@iterator",f="<<anonymous>>",p={array:v("array"),bigint:v("bigint"),bool:v("boolean"),func:v("function"),number:v("number"),object:v("object"),string:v("string"),symbol:v("symbol"),any:m(a),arrayOf:function(e){return m((function(t,r,o,i,a){if("function"!=typeof e)return new d("Property `"+a+"` of component `"+o+"` has invalid PropType notation inside arrayOf.");var s=t[r];if(!Array.isArray(s))return new d("Invalid "+i+" `"+a+"` of type `"+b(s)+"` supplied to `"+o+"`, expected an array.");for(var c=0;c<s.length;c++){var u=e(s,c,o,i,a+"["+c+"]",n);if(u instanceof Error)return u}return null}))},element:m((function(e,t,n,r,o){var i=e[t];return s(i)?null:new d("Invalid "+r+" `"+o+"` of type `"+b(i)+"` supplied to `"+n+"`, expected a single ReactElement.")})),elementType:m((function(t,n,r,o,i){var a=t[n];return e.isValidElementType(a)?null:new d("Invalid "+o+" `"+i+"` of type `"+b(a)+"` supplied to `"+r+"`, expected a single ReactElement type.")})),instanceOf:function(e){return m((function(t,n,r,o,i){if(!(t[n]instanceof e)){var a=e.name||f;return new d("Invalid "+o+" `"+i+"` of type `"+((s=t[n]).constructor&&s.constructor.name?s.constructor.name:f)+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}var s;return null}))},node:m((function(e,t,n,r,o){return y(e[t])?null:new d("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return m((function(t,o,i,a,s){if("function"!=typeof e)return new d("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var c=t[o],u=b(c);if("object"!==u)return new d("Invalid "+a+" `"+s+"` of type `"+u+"` supplied to `"+i+"`, expected an object.");for(var l in c)if(r(c,l)){var f=e(c,l,i,a,s+"."+l,n);if(f instanceof Error)return f}return null}))},oneOf:function(e){return Array.isArray(e)?m((function(t,n,r,o,i){for(var a=t[n],s=0;s<e.length;s++)if(h(a,e[s]))return null;var c=JSON.stringify(e,(function(e,t){return"symbol"===w(t)?String(t):t}));return new d("Invalid "+o+" `"+i+"` of value `"+String(a)+"` supplied to `"+r+"`, expected one of "+c+".")})):("production"!==process.env.NODE_ENV&&i(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),a)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&i("Invalid argument supplied to oneOfType, expected an instance of array."),a;for(var t=0;t<e.length;t++){var o=e[t];if("function"!=typeof o)return i("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+x(o)+" at index "+t+"."),a}return m((function(t,o,i,a,s){for(var c=[],u=0;u<e.length;u++){var l=(0,e[u])(t,o,i,a,s,n);if(null==l)return null;l.data&&r(l.data,"expectedType")&&c.push(l.data.expectedType)}return new d("Invalid "+a+" `"+s+"` supplied to `"+i+"`"+(c.length>0?", expected one of type ["+c.join(", ")+"]":"")+".")}))},shape:function(e){return m((function(t,r,o,i,a){var s=t[r],c=b(s);if("object"!==c)return new d("Invalid "+i+" `"+a+"` of type `"+c+"` supplied to `"+o+"`, expected `object`.");for(var u in e){var l=e[u];if("function"!=typeof l)return g(o,i,a,u,w(l));var f=l(s,u,o,i,a+"."+u,n);if(f)return f}return null}))},exact:function(e){return m((function(o,i,a,s,c){var u=o[i],l=b(u);if("object"!==l)return new d("Invalid "+s+" `"+c+"` of type `"+l+"` supplied to `"+a+"`, expected `object`.");var f=t({},o[i],e);for(var p in f){var h=e[p];if(r(e,p)&&"function"!=typeof h)return g(a,s,c,p,w(h));if(!h)return new d("Invalid "+s+" `"+c+"` key `"+p+"` supplied to `"+a+"`.\nBad object: "+JSON.stringify(o[i],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var m=h(u,p,a,s,c+"."+p,n);if(m)return m}return null}))}};function h(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function m(e){if("production"!==process.env.NODE_ENV)var t={},r=0;function o(o,a,s,u,l,p,h){if(u=u||f,p=p||s,h!==n){if(c){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var v=u+":"+s;!t[v]&&r<3&&(i("You are manually calling a React.PropTypes validation function for the `"+p+"` prop on `"+u+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),t[v]=!0,r++)}}return null==a[s]?o?null===a[s]?new d("The "+l+" `"+p+"` is marked as required in `"+u+"`, but its value is `null`."):new d("The "+l+" `"+p+"` is marked as required in `"+u+"`, but its value is `undefined`."):null:e(a,s,u,l,p)}var a=o.bind(null,!1);return a.isRequired=o.bind(null,!0),a}function v(e){return m((function(t,n,r,o,i,a){var s=t[n];return b(s)!==e?new d("Invalid "+o+" `"+i+"` of type `"+w(s)+"` supplied to `"+r+"`, expected `"+e+"`.",{expectedType:e}):null}))}function g(e,t,n,r,o){return new d((e||"React class")+": "+t+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+o+"`.")}function y(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(y);if(null===e||s(e))return!0;var t=function(e){var t=e&&(u&&e[u]||e[l]);if("function"==typeof t)return t}(e);if(!t)return!1;var n,r=t.call(e);if(t!==e.entries){for(;!(n=r.next()).done;)if(!y(n.value))return!1}else for(;!(n=r.next()).done;){var o=n.value;if(o&&!y(o[1]))return!1}return!0;default:return!1}}function b(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function w(e){if(null==e)return""+e;var t=b(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function x(e){var t=w(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return d.prototype=Error.prototype,p.checkPropTypes=o,p.resetWarningCache=o.resetWarningCache,p.PropTypes=p,p},w}()(C.isElement,!0)}else s.exports=function(){if(E)return S;E=1;var e=R();function t(){}function n(){}return n.resetWarningCache=t,S=function(){function r(t,n,r,o,i,a){if(a!==e){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function o(){return r}r.isRequired=r;var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i}}()();for(var L=i(s.exports),T={children:!0,direction:!0,options:!0,recognizeWith:!0,vertical:!0},M={action:"tap press",onDoubleTap:"doubletap",onPan:"pan",onPanCancel:"pancancel",onPanEnd:"panend",onPanStart:"panstart",onPinch:"pinch",onPinchCancel:"pinchcancel",onPinchEnd:"pinchend",onPinchIn:"pinchin",onPinchOut:"pinchout",onPinchStart:"pinchstart",onPress:"press",onPressUp:"pressup",onRotate:"rotate",onRotateCancel:"rotatecancel",onRotateEnd:"rotateend",onRotateMove:"rotatemove",onRotateStart:"rotatestart",onSwipe:"swipe",onSwipeRight:"swiperight",onSwipeLeft:"swipeleft",onSwipeUp:"swipeup",onSwipeDown:"swipedown",onTap:"tap"},D=0,k=Object.keys(M);D<k.length;D++){var N=k[D];T[N]=!0}function $(e,t){t.hasOwnProperty("vertical")&&console.warn("vertical is deprecated, please use `direction` instead");var n=t.direction;if(n||t.hasOwnProperty("vertical")){var r=n||(t.vertical?"DIRECTION_ALL":"DIRECTION_HORIZONTAL");e.get("pan").set({direction:_[r]}),e.get("swipe").set({direction:_[r]})}t.options&&Object.keys(t.options).forEach((function(n){if("recognizers"===n)Object.keys(t.options.recognizers).forEach((function(n){var r=e.get(n);r.set(t.options.recognizers[n]),t.options.recognizers[n].requireFailure&&r.requireFailure(t.options.recognizers[n].requireFailure)}),this);else{var r={};r[n]=t.options[n],e.set(r)}}),this),t.recognizeWith&&Object.keys(t.recognizeWith).forEach((function(n){e.get(n).recognizeWith(t.recognizeWith[n])}),this);for(var o=0,i=Object.keys(t);o<i.length;o++){var a=i[o],s=M[a];s&&(e.off(s),e.on(s,t[a]))}}var _=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.componentDidMount=function(){this.hammer=new n(this.domElement),$(this.hammer,this.props)},n.prototype.componentDidUpdate=function(){this.hammer&&$(this.hammer,this.props)},n.prototype.componentWillUnmount=function(){this.hammer&&(this.hammer.stop(),this.hammer.destroy()),this.hammer=null},n.prototype.render=function(){var e={};Object.keys(this.props).forEach((function(t){T[t]||(e[t]=this.props[t])}),this);var n=this;return e.ref=function(e){n.props.ref&&n.props.ref(e),n.domElement=e},t.cloneElement(t.Children.only(this.props.children),e)},n.displayName="Hammer",n.propTypes={className:L.string},n}(t.Component),A=function(t){return e.jsxs("div",o({className:"v360-menu-btns",onClick:t.clicked},{children:[e.jsx("i",{className:t.icon}),t.text]}))},z=function(n){function i(){var e=n.call(this)||this;return e.startDragging=function(t){e.dragging=!0,document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none",e.setLastPositions(t),e.dragStart=e.ctx.transformedPoint(e.state.lastX,e.state.lastY)},e.doDragging=function(t){if(e.setLastPositions(t),e.dragStart){var n=e.ctx.transformedPoint(e.state.lastX,e.state.lastY);e.ctx.translate(n.x-e.dragStart.x,n.y-e.dragStart.y),e.redraw()}},e.stopDragging=function(){e.dragging=!1,e.dragStart=null},e.prev=function(){e.props.spinReverse?e.turnRight():e.turnLeft()},e.next=function(){e.props.spinReverse?e.turnLeft():e.turnRight()},e.resetPosition=function(){e.currentScale=1,e.activeImage=1,e.setImage(!0)},e.zoomImage=function(t){e.setState({lastX:t.offsetX||t.pageX-e.canvas.offsetLeft,lastY:t.offsetY||t.pageY-e.canvas.offsetTop});var n=t.wheelDelta?t.wheelDelta/40:t.deltaY?-t.deltaY:0;n&&e.zoom(n)},e.zoomIn=function(){e.setState({lastX:e.centerX,lastY:e.centerY}),e.zoom(2)},e.zoomOut=function(){e.setState({lastX:e.centerX,lastY:e.centerY}),e.zoom(-2)},e.startMoving=function(t){e.movement=!0,e.movementStart=t.pageX,e.viewPortElementRef.style.cursor="grabbing"},e.doMoving=function(t){e.movement&&e.onMove(t.clientX)},e.stopMoving=function(){e.movement=!1,e.movementStart=0,e.viewPortElementRef.style.cursor="grab"},e.touchStart=function(t){e.movementStart=t.touches[0].clientX},e.touchMove=function(t){e.onMove(t.touches[0].clientX)},e.touchEnd=function(){e.movementStart=0},e.play=function(){e.setState({loopTimeoutId:window.setInterval((function(){return e.loopImages()}),100)})},e.togglePlay=function(){e.setState({playing:!e.state.playing})},e.togglePanMode=function(){e.setState({panmode:!e.state.panmode})},e.toggleFullScreen=function(){e.setState({isFullScreen:!e.state.isFullScreen})},e.handlePinch=function(t){t.scale<e.currentScale?e.zoomIn():t.scale>e.currentScale&&e.zoomOut()},e.pinchOut=function(){e.currentScale=1},e.viewPercentageRef=t.createRef(),e.viewPortElementRef=t.createRef(),e.canvas=null,e.ctx=null,e.isMobile=!1,e.imageData=[],e.images=[],e.loadedImages=0,e.viewerPercentage=null,e.currentImage=null,e.currentLeftPosition=e.currentTopPosition=0,e.currentCanvasImage=null,e.centerX=0,e.centerY=0,e.movementStart=0,e.movement=!1,e.speedFactor=13,e.activeImage=1,e.stopAtEdges=!1,e.state={lastX:0,lastY:0,minScale:.5,maxScale:4,scale:.2,customOffset:10,currentScale:1,currentTopPosition:0,currentLeftPosition:0,selectMenuOption:1,currentImage:null,dragging:!1,canvas:null,ctx:null,dragStart:null,currentCanvasImage:null,isFullScreen:!1,viewPortElementWidth:null,movementStart:0,movement:!1,dragSpeed:150,speedFactor:13,activeImage:1,stopAtEdges:!1,panmode:!1,currentLoop:0,loopTimeoutId:0,playing:!1,imagesLoaded:!1},e}return r(i,n),i.prototype.componentDidMount=function(){this.disableZoomin(),this.viewerPercentage=this.viewPercentageRef.current,this.viewPortElementRef=this.viewerContainerRef.querySelectorAll(".v360-viewport-container")[0],this.fetchData()},i.prototype.fetchData=function(){for(var e=1;e<=this.props.amount;e++){var t=this.props.paddingIndex?this.lpad(e,"0",2):e,n=this.props.fileName.replace("{index}",t),r="".concat(this.props.imagePath,"/").concat(n);this.imageData.push(r)}this.preloadImages()},i.prototype.lpad=function(e,t,n){for(e=e.toString();e.length<n;)e=t+e;return e},i.prototype.preloadImages=function(){if(this.imageData.length>0)try{for(var e=0,t=this.imageData;e<t.length;e++){var n=t[e];this.addImage(n)}}catch(e){console.error("Something went wrong while loading images: ".concat(e.message))}else console.log("No Images Found")},i.prototype.addImage=function(e){var t=new Image;t.src=e,t.addEventListener("load",this.onImageLoad.bind(this)),t.onerror=this.onImageLoad.bind(this),this.images.push(t)},i.prototype.onImageLoad=function(e){var t=Math.round(this.loadedImages/this.props.amount*100);this.loadedImages+=1,this.updatePercentageInLoader(t),this.loadedImages===this.props.amount?this.onAllImagesLoaded(e):1===this.loadedImages&&console.log("load first image")},i.prototype.updatePercentageInLoader=function(e){this.viewerPercentage.innerHTML=e+"%"},i.prototype.onAllImagesLoaded=function(){this.setState({imagesLoaded:!0}),this.initData()},i.prototype.initData=function(){this.canvas=this.imageContainerRef,this.ctx=this.canvas.getContext("2d"),this.attachEvents(),this.checkMobile(),this.loadInitialImage(),this.setState({playing:this.props.autoplay})},i.prototype.attachEvents=function(){this.state.panmode?this.bindPanModeEvents():this.bind360ModeEvents()},i.prototype.bindPanModeEvents=function(){this.viewPortElementRef.removeEventListener("touchend",this.touchEnd),this.viewPortElementRef.removeEventListener("touchstart",this.touchStart),this.viewPortElementRef.removeEventListener("touchmove",this.touchMove),this.viewPortElementRef.addEventListener("touchend",this.stopDragging),this.viewPortElementRef.addEventListener("touchstart",this.startDragging),this.viewPortElementRef.addEventListener("touchmove",this.doDragging),this.viewPortElementRef.removeEventListener("mouseup",this.stopMoving),this.viewPortElementRef.removeEventListener("mousedown",this.startMoving),this.viewPortElementRef.removeEventListener("mousemove",this.doMoving),this.viewPortElementRef.addEventListener("mouseup",this.stopDragging),this.viewPortElementRef.addEventListener("mousedown",this.startDragging),this.viewPortElementRef.addEventListener("mousemove",this.doDragging)},i.prototype.bind360ModeEvents=function(){this.viewPortElementRef.removeEventListener("touchend",this.stopDragging),this.viewPortElementRef.removeEventListener("touchstart",this.startDragging),this.viewPortElementRef.removeEventListener("touchmove",this.doDragging),this.viewPortElementRef.addEventListener("touchend",this.touchEnd),this.viewPortElementRef.addEventListener("touchstart",this.touchStart),this.viewPortElementRef.addEventListener("touchmove",this.touchMove),this.viewPortElementRef.removeEventListener("mouseup",this.stopDragging),this.viewPortElementRef.removeEventListener("mousedown",this.startDragging),this.viewPortElementRef.removeEventListener("mousemove",this.doDragging),this.viewPortElementRef.addEventListener("mouseup",this.stopMoving),this.viewPortElementRef.addEventListener("mousedown",this.startMoving),this.viewPortElementRef.addEventListener("mousemove",this.doMoving)},i.prototype.setLastPositions=function(e){this.isMobile?this.setState({lastX:e.touches[0].offsetX||e.touches[0].pageX-this.canvas.offsetLeft,lastY:e.touches[0].offsetY||e.touches[0].pageY-this.canvas.offsetTop}):this.setState({lastX:e.offsetX||e.pageX-this.canvas.offsetLeft,lastY:e.offsetY||e.pageY-this.canvas.offsetTop})},i.prototype.checkMobile=function(){this.isMobile=!(!("ontouchstart"in window)&&!navigator.msMaxTouchPoints)},i.prototype.loadInitialImage=function(){this.currentImage=this.imageData[0],this.setImage()},i.prototype.setImage=function(e){var t=this;if(void 0===e&&(e=!1),this.currentLeftPosition=this.currentTopPosition=0,e){this.currentCanvasImage=this.images[0];var n=this.viewPortElementRef.getBoundingClientRect();this.canvas.width=this.state.isFullScreen?n.width:this.currentCanvasImage.width,this.canvas.height=this.state.isFullScreen?n.height:this.currentCanvasImage.height,this.trackTransforms(this.ctx),this.redraw()}else this.currentCanvasImage=new Image,this.currentCanvasImage.crossOrigin="anonymous",this.currentCanvasImage.src=this.currentImage,this.currentCanvasImage.addEventListener("load",(function(){var e=t.viewPortElementRef.getBoundingClientRect();t.canvas.width=t.state.isFullScreen?e.width:t.currentCanvasImage.width,t.canvas.height=t.state.isFullScreen?e.height:t.currentCanvasImage.height,t.trackTransforms(t.ctx),t.redraw()})),this.currentCanvasImage.onerror=function(){console.log("cannot load this image")}},i.prototype.redraw=function(){try{var e=this.ctx.transformedPoint(0,0),t=this.ctx.transformedPoint(this.canvas.width,this.canvas.height),n=this.canvas.width/this.currentCanvasImage.width,r=this.canvas.height/this.currentCanvasImage.height,o=Math.min(n,r),i=(this.canvas.width-this.currentCanvasImage.width*o)/2,a=(this.canvas.height-this.currentCanvasImage.height*o)/2;this.ctx.clearRect(e.x,e.y,t.x-e.x,t.y-e.y),this.centerX=this.currentCanvasImage.width*o/2,this.centerY=this.currentCanvasImage.height*o/2,this.ctx.drawImage(this.currentCanvasImage,this.currentLeftPosition,this.currentTopPosition,this.currentCanvasImage.width,this.currentCanvasImage.height,i,a,this.currentCanvasImage.width*o,this.currentCanvasImage.height*o)}catch(e){this.trackTransforms(this.ctx)}},i.prototype.trackTransforms=function(e){var t=this;return new Promise((function(n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=r.createSVGMatrix();t.ctx.getTransform=function(){return o};var i=[],a=e.save;t.ctx.save=function(){return i.push(o.translate(0,0)),a.call(t.ctx)};var s=e.restore;t.ctx.restore=function(){return o=i.pop(),s.call(t.ctx)};var c=t.ctx.scale;t.ctx.scale=function(e,n){return o=o.scaleNonUniform(e,n),c.call(t.ctx,e,n)};var u=t.ctx.rotate;t.ctx.rotate=function(e){return o=o.rotate(180*e/Math.PI),u.call(t.ctx,e)};var l=t.ctx.translate;t.ctx.translate=function(e,n){return o=o.translate(e,n),l.call(t.ctx,e,n)};var f=t.ctx.transform;t.ctx.transform=function(e,n,i,a,s,c){var u=r.createSVGMatrix();return u.a=e,u.b=n,u.c=i,u.d=a,u.e=s,u.f=c,o=o.multiply(u),f.call(t.ctx,e,n,i,a,s,c)};var p=t.ctx.setTransform;t.ctx.setTransform=function(e,n,r,i,a,s){return o.a=e,o.b=n,o.c=r,o.d=i,o.e=a,o.f=s,p.call(t.ctx,e,n,r,i,a,s)};var h=r.createSVGPoint();t.ctx.transformedPoint=function(e,t){return h.x=e,h.y=t,h.matrixTransform(o.inverse())},n(t.ctx)}))},i.prototype.turnLeft=function(){this.moveActiveIndexDown(1)},i.prototype.turnRight=function(){this.moveActiveIndexUp(1)},i.prototype.moveActiveIndexUp=function(e){this.stopAtEdges?this.activeImage+e>=this.props.amount?this.activeImage=this.props.amount:this.activeImage+=e:this.activeImage=(this.activeImage+e)%this.props.amount||this.props.amount,this.update()},i.prototype.moveActiveIndexDown=function(e){this.stopAtEdges?this.activeImage-e<=1?this.activeImage=1:this.activeImage-=e:this.activeImage-e<1?this.activeImage=this.props.amount+(this.activeImage-e):this.activeImage-=e,this.update()},i.prototype.update=function(){var e=this.images[this.activeImage-1];this.currentCanvasImage=e,this.redraw()},i.prototype.zoom=function(e){var t=Math.pow(1.01,e);if(t>1?this.currentScale+=t:this.currentScale-t>1?this.currentScale-=t:this.currentScale=1,this.currentScale>1){var n=this.ctx.transformedPoint(this.state.lastX,this.state.lastY);this.ctx.translate(n.x,n.y),this.ctx.scale(t,t),this.ctx.translate(-n.x,-n.y),this.redraw()}},i.prototype.disableZoomin=function(){document.addEventListener("gesturestart",(function(e){e.preventDefault(),document.body.style.zoom=.99})),document.addEventListener("gesturechange",(function(e){e.preventDefault(),document.body.style.zoom=.99})),document.addEventListener("gestureend",(function(e){e.preventDefault(),document.body.style.zoom=1}))},i.prototype.onMove=function(e){if(e-this.movementStart>=this.speedFactor){var t=Math.floor((e-this.movementStart)/this.speedFactor)||1;this.movementStart=e,this.props.spinReverse?this.moveActiveIndexDown(t):this.moveActiveIndexUp(t),this.redraw()}else if(this.movementStart-e>=this.speedFactor){var n=Math.floor((this.movementStart-e)/this.speedFactor)||1;this.movementStart=e,this.props.spinReverse?this.moveActiveIndexUp(n):this.moveActiveIndexDown(n),this.redraw()}},i.prototype.onSpin=function(){(this.state.playing||this.state.loopTimeoutId)&&this.stop()},i.prototype.stop=function(){1===this.activeImage&&this.setState({currentLoop:0}),this.setState({playing:!1}),window.clearTimeout(this.state.loopTimeoutId)},i.prototype.loopImages=function(){var e=this.props.loop?this.props.loop:1;1===this.activeImage?this.state.currentLoop===e?this.stop():(this.setState({currentLoop:this.state.currentLoop+1}),this.next()):this.next()},i.prototype.componentDidUpdate=function(e,t){this.state.currentLeftPosition!==t.currentLeftPosition&&console.log("Left Position Changed"),this.state.panmode!==t.panmode&&this.attachEvents(),this.state.playing!==t.playing&&(this.state.playing?this.play():this.stop()),this.state.isFullScreen!==t.isFullScreen&&(this.state.isFullScreen?(this.viewerContainerRef.classList.add("v360-main"),this.viewerContainerRef.classList.add("v360-fullscreen")):(this.viewerContainerRef.classList.remove("v360-main"),this.viewerContainerRef.classList.remove("v360-fullscreen")),this.setImage())},i.prototype.render=function(){var t=this;return e.jsx("div",{children:e.jsxs("div",o({className:"v360-viewer-container",ref:function(e){t.viewerContainerRef=e},id:"identifier",onWheel:function(e){return t.zoomImage(e)}},{children:[this.state.imagesLoaded?"":e.jsxs("div",o({className:"v360-viewport"},{children:[e.jsx("div",{className:"v360-spinner-grow"}),e.jsx("p",{ref:this.viewPercentageRef,className:"v360-percentage-text"})]})),e.jsx(_,o({onPinchIn:this.handlePinch,onPinchOut:this.handlePinch,onPinchEnd:this.pinchOut,options:{recognizers:{pinch:{enable:!0}}}},{children:e.jsxs("div",o({className:"v360-viewport-container v360-viewport"},{children:[e.jsx("canvas",{className:"v360-image-container",ref:function(e){t.imageContainerRef=e}}),this.props.boxShadow?e.jsx("div",{className:"v360-product-box-shadow"}):""]}))})),e.jsx("abbr",o({title:"Fullscreen Toggle"},{children:e.jsx("div",o({className:"v360-fullscreen-toggle text-center",onClick:this.toggleFullScreen},{children:e.jsx("div",o({className:"dark"===this.props.buttonClass?"v360-fullscreen-toggle-btn text-light":"v360-fullscreen-toggle-btn text-dark"},{children:e.jsx("i",{className:this.state.isFullScreen?"fas fa-compress text-lg":"fas fa-expand text-lg"})}))}))})),e.jsx("div",o({id:"v360-menu-btns",className:this.props.buttonClass},{children:e.jsxs("div",o({className:"v360-navigate-btns"},{children:[e.jsx(A,{clicked:this.togglePlay,icon:this.state.playing?"fa fa-pause":"fa fa-play"}),e.jsx(A,{clicked:this.zoomIn,icon:"fa fa-search-plus"}),e.jsx(A,{clicked:this.zoomOut,icon:"fa fa-search-minus"}),this.state.panmode?e.jsx(A,{clicked:this.togglePanMode,text:"360Â°"}):e.jsx(A,{clicked:this.togglePanMode,icon:"fa fa-hand-paper"}),e.jsx(A,{clicked:this.prev,icon:"fa fa-chevron-left"}),e.jsx(A,{clicked:this.next,icon:"fa fa-chevron-right"}),e.jsx(A,{clicked:this.resetPosition,icon:"fa fa-sync"})]}))}))]}))})},i}(t.Component);module.exports=z;
//# sourceMappingURL=index.js.map
